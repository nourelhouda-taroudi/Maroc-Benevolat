<!-- cree annonce -->
<div id="annonce" class="container list bg-white p-3 mt-3 rounded "  style="display: block;">

    <div>
      <button type="button" class="form-control rounded-pill border-0 bg-gray pointer shadow"
        style="background-color: rgb(250, 181, 96);" data-bs-toggle="modal" data-bs-target="#exampleModal">
        Ajouter Annonce...?
      </button>
      <!-- create modal ANNONCE -->
      <div  class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header align-items-center">
              <h5 class="text-dark text-center w-100 m-0" id="exampleModalLabel">
                Cree annonce
              </h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
              </button>
            </div>
            <div class="modal-body" >
              <form>
                <div class="d-flex flex-column" >
                  <!-- name -->
                  <div class="d-flex align-items-center">
                    <div class="p-2">
                      <img src="https://source.unsplash.com/collection/happy-people" alt="from fb" class="rounded-circle"
                        style="     width: 38px;  height: 38px;  object-fit: cover;" />
                    </div>
                    <div>
                      <p class="m-0 fw-bold">Care</p>
                      <select [(ngModel)]="mypost.visualisation" [ngModelOptions]="{standalone: true}" class="form-select border-0 bg-gray w-75 fs-7" aria-label="Default select example">
                        <option selected value="1">Public</option>
                        <option value="2">Pin To Top</option>
                        <option value="3">Hide</option>
                      </select>
                    </div>
                  </div>
                  <!-- text -->
                  <div>
                    <textarea [(ngModel)]="mypost.text" [ngModelOptions]="{standalone: true}" cols="30" rows="5" class="form-control border-0" style="margin: 10px;"></textarea>
                  </div>
                  <!-- emoji  -->
                  <div class="  d-flex justify-content-between align-items-center  "> 
                     <img  src="https://www.facebook.com/images/composer/SATP_Aa_square-2x.png" class="pointer"
                      alt="fb text" style="  width: 30px;  height: 30px;  object-fit: cover;" />
                    <i class="fa fa-smile-o text-warning" aria-hidden="true"></i>
                   
                  </div>
                  <!-- options -->
                  <div class=" d-flex justify-content-between  border border-1 border-light  rounded  p-3 mt-3">
                    <div>
                      <input [(ngModel)]="mypost.image" [ngModelOptions]="{standalone: true}" type="file" (change)="onFileSelected($event)">
                      <i class="fa fa-image   text-success "></i>
                    </div>
                  </div>
                </div>
              </form>
  
              <!-- end -->
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" style="width: 60px; height: 30px;"
                data-bs-dismiss="modal" (click)="close()">Close</button>
              <button *ngIf="!edite" (click)="persistpost()" data-bs-dismiss="modal" type="button" class="btn btn-success" style="width: 90px; height: 30px;">publier </button>
              <button *ngIf="edite"  (click)="updatepost()" data-bs-dismiss="modal"type="button" class="btn btn-warning" style="width: 120px; height: 30px;">sauvgarder </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="bg-white p-4 rounded shadow mt-3" *ngFor="let post of posts | orderBy:'createdAt'">
      <!-- author -->
      <div class="d-flex justify-content-between">
        <!-- avatar -->
        <div class="d-flex">
          <img src="https://source.unsplash.com/collection/happy-people" alt="avatar" class="rounded-circle me-2"
            style="width: 38px; height: 38px; object-fit: cover" />
          <div style="margin-left: 20px;">
            <p class="m-0 fw-bold">Care</p>
            <span class="text-muted fs-7" > {{post.createdAt | date: 'short'}}</span>
          </div>
        </div>
        <!-- edit -->
        <div class="dropdown">
          <button class="btn btn-success fa fa-pencil" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
          </button>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
              <li class="d-flex align-items-center" (click)="editepost(post)">
                  <a class="dropdown-item d-flex justify-content-around align-items-center  fs-7 fa fa-pencil"  data-bs-toggle="modal" data-bs-target="#exampleModal">Editer</a>
              </li>
              <li class="d-flex align-items-center"  (click)="deletepost(post.id)">
                <a class="dropdown-item d-flex justify-content-around align-items-center  fs-7 fa fa-trash" >Supprimer</a>
              </li>
            </ul>
        </div>
      </div>
      <!-- post content -->
      <div class="mt-3">
        <!-- content -->
        <div>
          <p>{{post.text}}</p>
          <div class="imagecenter" >
            <img src="{{post.image}}" class="imagepost" />
            <img src="{{post.image}}" class="imagepost" />
          </div>
        </div>
        <!-- likes & comments -->
        <div class="post__comment mt-3 position-relative">
  
          <!-- comments start-->
          <div class="accordion" id="accordionExample">
            <div class="accordion-item border-0">
              <!-- comment collapse -->
              <hr />
              <!-- comment & like bar -->
              <div class="d-flex justify-content-around">
                <div class="  dropdown-item  rounded  d-flex  justify-content-center align-items-center  pointer  text-muted  p-1 ">
                  <span (click)="tolike(post)" [ngClass]="{  'text-danger':!post.like,'text-primary':post.like }">
                    <i class="fa" [ngClass]="{'fa-thumbs-up':post.like, 'fa-thumbs-down':!post.like }">
                    </i>
                    {{post.likeNum}}
                  </span>
                </div>
              </div>
            </div>
          </div>
          <!-- end -->
        </div>
      </div>
    </div>
  </div>